/* (c) Aaron Gustafson (@AaronGustafson). MIT License. http://github.com/easy-designs/jquery.easy-sortable-tables.js */
(function(f,d){var e=null,c="click",g=/<\/?tbody>/ig,a=f("<tbody/>");if("ontouchstart" in window||"createTouch" in document){c="touchend"}function b(h){return h.is("[data-sort-key]")?h.data("sort-key"):f.trim(h.find(".sort-key").text().toUpperCase()+" "+h.text().toUpperCase())}f.fn.easySortableTable=function(){var h=f(this);h.on(c,"thead a",function(k){k.preventDefault();var l=f(this),j=l.closest("th").index(),q=l.closest("table"),o=l.is(".up")?-1:1,m=(q.find("tr[data-table-sort-group]").length>0),r=q.find("tbody tr").get(),p=f([]),i,n;q.find("tbody").remove();q.find("thead a").removeClass("up down").closest("th").removeClass("active");l.addClass(o==1?"up":"down").closest("th").addClass("active");f.each(r,function(t,v){var s=b(f(v).children().eq(j)),u=parseInt(s,10);this.sortKey=(!isNaN(u))?u:s});r.sort(function(t,s){if(t.sortKey<s.sortKey){return -o}if(t.sortKey>s.sortKey){return o}return 0});if(m){f.each(r,function(t,v){var s=f(v),u=s.data("table-sort-group");if(u!=n){if(n!=d){p=p.add(i)}n=u;i=a.clone()}i.append(s);v.sortKey=e});p=p.add(i)}else{p=a.clone();f.each(r,function(s,t){p.append(t);t.sortKey=e})}q.append(p)});return this}})(jQuery);